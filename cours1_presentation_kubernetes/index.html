<!doctype html><html lang=fr dir=ltr><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.111.3"><meta name=generator content="Relearn 5.12.5+tip"><meta name=description content="TP - Intro à k8s"><meta name=author content="Alexandre P."><title>Presentation de Kubernetes - Introduction à Kubernetes</title><link href=../cours1_presentation_kubernetes/index.xml rel=alternate type=application/rss+xml title="Presentation de Kubernetes - Introduction à Kubernetes"><link href=../css/fontawesome-all.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=../css/fontawesome-all.min.css rel=stylesheet></noscript><link href=../css/nucleus.css rel=stylesheet><link href=../css/auto-complete.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=../css/auto-complete.css rel=stylesheet></noscript><link href=../css/perfect-scrollbar.min.css rel=stylesheet><link href=../css/fonts.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=../css/fonts.css rel=stylesheet></noscript><link href=../css/theme.css rel=stylesheet><link href=../css/theme-blue.css rel=stylesheet id=variant-style><link href=../css/variant.css rel=stylesheet><link href=../css/print.css rel=stylesheet media=print><link href=../css/ie.css rel=stylesheet><script src=../js/url.js></script>
<script src=../js/variant.js></script>
<script>window.index_js_url="../index.search.js";var root_url="../",baseUriFull,baseUri=root_url.replace(/\/$/,"");window.T_Copy_to_clipboard="Copier dans le presse-papiers",window.T_Copied_to_clipboard="Copié dans le presse-papiers!",window.T_Copy_link_to_clipboard="Copier le lien dans le presse-papiers",window.T_Link_copied_to_clipboard="Lien copié dans le presse-papiers!",window.T_No_results_found="Aucun résultat trouvé pour \u0022{0}\u0022",window.T_N_results_found="{1} résultats trouvés pour \u0022{0}\u0022",baseUriFull="https://zaggash.github.io/tp-iut-kubernetes/",window.variants&&variants.init(["blue"])</script></head><body class="mobile-support html" data-url=../cours1_presentation_kubernetes/><div id=body class=default-animation><div id=sidebar-overlay></div><div id=toc-overlay></div><nav id=topbar class=highlightable><div><div class=navigation><a class="nav nav-next topbar-link" href=../cours2_installation_kubernetes/ title="Installer Kubernetes (&#129106;)"><i class="fas fa-chevron-right fa-fw"></i></a></div><div class=navigation><a class="nav nav-prev topbar-link" href=../ title="Home (&#129104;)"><i class="fas fa-chevron-left fa-fw"></i></a></div><div id=breadcrumbs><span id=sidebar-toggle-span><a href=# id=sidebar-toggle class=topbar-link title='Menu (CTRL+ALT+n)'><i class="fas fa-bars fa-fw"></i></a></span>
<span id=toc-menu title='Table des matières (CTRL+ALT+t)'><i class="fas fa-list-alt fa-fw"></i></span>
<span class=links>Presentation de Kubernetes</span></div><div class="default-animation progress"><div class=toc-wrapper><nav id=TableOfContents><ul><li><a href=#architecture-de-kubernetes>Architecture de Kubernetes</a></li><li><a href=#philosophie>Philosophie</a><ul><li><a href=#historique-et-popularité>Historique et popularité</a></li><li><a href=#les-3-gros-changements>Les 3 gros changements</a></li><li><a href=#apports-techniques-de-kubernetes-pour-le-devops>Apports techniques de Kubernetes pour le DevOps</a></li></ul></li><li><a href=#objets-fondamentaux-de-kubernetes>Objets fondamentaux de Kubernetes</a></li><li><a href=#kubernetes-entre-cloud-et-auto-hébergement>Kubernetes entre Cloud et auto-hébergement</a></li><li><a href=#distributions-de-kubernetes>Distributions de Kubernetes</a></li></ul></nav></div></div></div></nav><main id=body-inner class="highlightable default" tabindex=-1><div class=flex-block-wrapper><div id=head-tags></div><article class=default><h1 id=presentation-de-kubernetes>Presentation de Kubernetes</h1><ul><li>Kubernetes est une solution d&rsquo;orchestration de conteneurs extrêmement populaire.</li><li>Le projet est très ambitieux : une façon de considérer son ampleur est de voir Kubernetes comme un système d&rsquo;exploitation (et un standard ouvert) pour les applications distribuées et le cloud.</li><li>Le projet est développé en Open Source au sein de la Cloud Native Computing Foundation.</li></ul><h2 id=architecture-de-kubernetes>Architecture de Kubernetes</h2><p><a href=#image-22cffe02dd2a37519959a5daf9ffbedd class=lightbox-link><img src=./k8s_archi1.png alt style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox id=image-22cffe02dd2a37519959a5daf9ffbedd><img src=./k8s_archi1.png alt class=lightbox-image loading=lazy></a></p><ul><li><p>Kubernetes rassemble en un cluster et fait coopérer un groupe de serveurs appelés <strong>noeuds</strong> (nodes).</p></li><li><p>Kubernetes a une architecture <strong>Control Plane/workers</strong> composée d&rsquo;un <strong>control plane</strong> et de nœuds de calculs (<strong>workers</strong>).</p></li><li><p>Cette architecture permet essentiellement de rassembler les machines en un <strong>cluster unique</strong> sur lequel on peut faire tourner des <strong>&ldquo;charges de calcul&rdquo; (workloads)</strong> très diverses.</p></li><li><p>Sur un tel cluster le déploiement d&rsquo;un workload prend la forme de <strong>ressources (objets k8s)</strong> qu&rsquo;on <strong>décrit sous forme de code</strong> et qu&rsquo;on crée ensuite effectivement via l&rsquo;API Kubernetes.</p></li><li><p>Pour uniformiser les déploiement logiciel Kubernetes est basé sur le standard des <strong>conteneurs</strong> (défini aujourd&rsquo;hui sous le nom <strong>Container Runtime Interface</strong>, Docker est l&rsquo;implémentation la plus connue).</p></li><li><p>Plutôt que de déployer directement des conteneurs, Kubernetes crée des <strong>aggrégats de un ou plusieurs conteneurs</strong> appelés des <strong>Pods</strong>. Les pods sont donc l&rsquo;unité de base de Kubernetes.</p></li></ul><h2 id=philosophie>Philosophie</h2><h3 id=historique-et-popularité>Historique et popularité</h3><p>Kubernetes est un logiciel développé originellement par Google et basé sur une dizaine d&rsquo;années d&rsquo;expérience de déploiement d&rsquo;applications énormes (distribuées) sur des clusters de machines.</p><p>Maintenant à part entière au sein de Cloud Native, son ancêtre est l&rsquo;orchestrateur borg utilisé par Google dans les années 2000.</p><p>La première version est sortie en 2015 et k8s est devenu depuis l&rsquo;un des projets open source les plus populaires du monde.</p><p>L&rsquo;écosystème logiciel de Kubernetes s&rsquo;est développée autour la <strong>Cloud Native Computing Foundation</strong> qui comprend notamment : Google, CoreOS, Mesosphere, Red Hat, Twitter, Huawei, Intel, Cisco, IBM, Docker, Univa et VMware. Cette fondation vise au pilotage et au financement collaboratif du développement de Kubernetes (un peut comme la Linux Foundation).</p><h3 id=les-3-gros-changements>Les 3 gros changements</h3><p>Kubernetes se trouve au coeur de trois transformations profondes techniques, humaines et économiques de l&rsquo;informatique:</p><ul><li>Le cloud</li><li>La conteneurisation logicielle</li><li>Le mouvement DevOps</li></ul><p>Il est un des projets qui symbolise et supporte techniquement ces transformations. D&rsquo;où son omniprésence dans les discussions informatiques actuellement.</p><h4 id=le-cloud>Le Cloud</h4><ul><li>Le cloud est un mouvement de réorganisation technique et économique de l&rsquo;informatique.</li><li>On retourne à la consommation de &ldquo;temps de calcul&rdquo;, pour remplacer le serveur dédié.</li><li>Pour organiser cela on définit trois niveaux, techniques et économiques:<ul><li><strong>Software as a Service</strong>: location de services à travers internet pour les usagers finaux</li><li><strong>Plateforme as a Service</strong>: location d&rsquo;un environnement d&rsquo;exécution logiciel flexible à destination des développeurs</li><li><strong>Infrastructure as a Service</strong>: location de resources &ldquo;matérielles&rdquo; à la demande pour installer des logiciels sans avoir à maintenir un data center.</li></ul></li></ul><h4 id=conteneurisation>Conteneurisation</h4><p>La conteneurisation est permise par l&rsquo;isolation au niveau du noyau du système d&rsquo;exploitation du serveur : les processus sont isolés dans des namespaces au niveau du noyau. Cette innovation permet de simuler l&rsquo;isolation sans ajouter une couche de virtualisation comme pour les machines virtuelles.</p><p>Ainsi les conteneurs permettent d&rsquo;avoir des performances proche d&rsquo;une application traditionnelle tournant directement sur le système d&rsquo;exploitation hote et ainsi d&rsquo;optimiser les ressources.</p><p>Les images de conteneurs sont aussi beaucoup plus légers qu&rsquo;une image de VM.</p><p>Les technologies de conteneurisation permettent donc de faire des boîtes isolées avec les logiciels pour apporter l&rsquo;uniformisation du déploiement:</p><ul><li>Une façon standard de packager un logiciel.</li><li>Cela permet d&rsquo;assembler de grosses applications comme des briques</li><li>Cela réduit la complexité grâce:<ul><li>à l&rsquo;intégration de toutes les dépendance déjà dans le conteneur</li><li>au principe d&rsquo;immutabilité qui implique de jeter les conteneurs ( Pets vs Cattle ) ce qui rend l&rsquo;infra prédictible.</li></ul></li></ul><h4 id=devops>DevOps</h4><ul><li>Faire le pont entre les développeurs et les administrateurs système.</li><li>Calquer les rythmes de travail sur l&rsquo;organisation agile du développement logiciel</li><li>Rapprocher techniquement la gestion de l&rsquo;infrastructure du développement avec l&rsquo;infrastructure as code.<ul><li>concrêtement on écrit des fichiers de code pour gérer les éléments d&rsquo;infra</li><li>l&rsquo;état de l&rsquo;infrastructure est plus claire et documentée par le code</li><li>la complexité est plus gérable car tout est déclaré et modifiable au fur et à mesure de façon centralisée</li><li>l&rsquo;usage de git et des branches/tags pour la gestion de l&rsquo;évolution d&rsquo;infrastructure</li></ul></li></ul><h3 id=apports-techniques-de-kubernetes-pour-le-devops>Apports techniques de Kubernetes pour le DevOps</h3><p>Abstraction et standardisation des infrastructures:</p><ul><li>Langage descriptif et incrémental: on décrit ce qu&rsquo;on veut plutôt que la logique complexe pour l&rsquo;atteindre</li><li>Logique opérationnelle intégrée dans l&rsquo;orchestrateur: la responsabilité de l&rsquo;état du cluster est laissé au controlleur k8s ce qui simplifie le travail</li></ul><p>On peut alors espérer <strong>fluidifier</strong> la gestion des défis techniques d&rsquo;un grosse application et atteindre plus ou moins la livraison logicielle continue (CD de CI/CD)</p><h4 id=architecture-logicielle-optimale-pour-kubernetes>Architecture logicielle optimale pour Kubernetes</h4><p>Kubernetes est très versatile et permet d&rsquo;installer des logiciels traditionnels &ldquo;monolithiques&rdquo; (gros backends situés sur une seule machine).</p><p>Cependant aux vues des transformations humaines et techniques précédentes, l&rsquo;organisation de Kubernetes prend vraiment sens pour le développement d&rsquo;applications microservices:</p><ul><li>des applications avec de nombreux de &ldquo;petits&rdquo; services.</li><li>chaque service a des problématiques très limitées (gestion des factures = un logiciel qui fait que ça)</li><li>les services communiquent par le réseaux selon différents modes/API (REST, gRPC, job queues, GraphQL)</li></ul><p>Les microservices permettent justement le DevOps car:</p><ul><li>ils peuvent être déployés séparéments</li><li>une petite équipe gère chaque service ou groupe thématique de services</li></ul><p>Nous y reviendrons pour expliquer l&rsquo;usage des ressources Kubernetes.</p><h2 id=objets-fondamentaux-de-kubernetes>Objets fondamentaux de Kubernetes</h2><ul><li>Les <strong>pods</strong> Kubernetes servent à grouper des conteneurs fortement couplés en unités d&rsquo;application</li><li>Les <strong>deployments</strong> sont une abstraction pour <strong>créer ou mettre à jour</strong> (ex : scaler) des groupes de <strong>pods</strong>.</li><li>Enfin, les <strong>services</strong> sont des points d&rsquo;accès réseau qui permettent aux différents workloads (deployments) de communiquer entre eux et avec l&rsquo;extérieur.</li></ul><p>Au delà de ces trois éléments, l&rsquo;écosystème d&rsquo;objets de Kubernetes est vaste et complexe</p><p><a href=#image-07d5a36ba81745f7372591a217955581 class=lightbox-link><img src=./k8s_objects_hierarchy.png alt style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox id=image-07d5a36ba81745f7372591a217955581><img src=./k8s_objects_hierarchy.png alt class=lightbox-image loading=lazy></a></p><h2 id=kubernetes-entre-cloud-et-auto-hébergement>Kubernetes entre Cloud et auto-hébergement</h2><p>Un des intérêts principaux de Kubernetes est de fournir un modèle de Plateform as a Service (PaaS) suffisamment versatile qui permet l&rsquo;interopérabilité entre des fournisseurs de clouds différents et des solutions auto-hébergées (on premise).</p><p>Cependant cette interopérabilité n&rsquo;est pas automatique (pour les cas complexes) car Kubernetes permet beaucoup de variations. Concrêtement il existe des variations entre les installations possibles de Kubernetes</p><h2 id=distributions-de-kubernetes>Distributions de Kubernetes</h2><p>Kubernetes est avant tout un ensemble de standards qui peuvent avoir des implémentations concurrentes. Il existe beaucoup de variétés (<strong>flavours</strong>) de Kubernetes, implémentant concrètement les solutions techniques derrière tout ce que Kubernetes ne fait que définir : solutions réseau, stockage (distribué ou non), loadbalancing, service de reverse proxy (Ingress), autoscaling de cluster (ajout de nouvelles VM au cluster automatiquement), monitoring…</p><p>Il est très possible de monter un cluster Kubernetes en dehors de ces fournisseurs, mais cela demande de faire des choix (ou bien une solution <em>opinionated</em> ouverte comme Rancher) et une relative maîtrise d&rsquo;un nombre varié de sujets (bases de données, solutions de loadbalancing, redondance du stockage…).</p><p>C&rsquo;est là le compromis de kubernetes : tout est ouvert et standardisé, mais devant la complexité et connaissance nécessaire pour mettre en place sa propre solution (stockage distribué par exemple) il est souvent préférable de louer un cluster chez un fournisseur quitte à retomber dans un certain <a href=https://fr.wikipedia.org/wiki/Enfermement_propri%C3%A9taire target=_blank><em>vendor lock-in</em> (enfermement propriétaire)</a>.</p><p>Quelques variantes connues de Kubernetes:</p><ul><li>Google Kubernetes Engine (<strong>GKE</strong>) (Google Cloud Plateform): L&rsquo;écosystème Kubernetes développé par Google. Très populaire car très flexible tout en étant l&rsquo;implémentation de référence de Kubernetes.</li><li>Azure Kubernetes Services (<strong>AKS</strong>) (Microsoft Azure): Un écosystème Kubernetes axé sur l&rsquo;intégration avec les services du cloud Azure (stockage, registry, réseau, monitoring, services de calcul, loadbalancing, bases de données…).</li><li>Elastic Kubernetes Services (<strong>EKS</strong>) (Amazon Web Services): Un écosystème Kubernetes assez standard à la sauce Amazon axé sur l&rsquo;intégration avec le cloud Amazon (la gestion de l&rsquo;accès, des loadbalancers ou du scaling notamment, le stockage avec Amazon EBS, etc.).</li><li><strong>Rancher</strong>: Un écosystème Kubernetes très complet, assez <em>opinionated</em> et entièrement open-source, non lié à un fournisseur de cloud. Inclut l&rsquo;installation de stack de monitoring (Prometheus), de logging, de réseau mesh (Istio) via une interface web agréable. Rancher maintient aussi de nombreuses solutions open source, comme par exemple Longhorn pour le stockage distribué.</li><li><strong>K3S</strong>: Un écosystème Kubernetes fait par l&rsquo;entreprise Rancher et axé sur la légèreté. Il remplace <code>etcd</code> par une base de données Postgres, utilise Traefik pour l&rsquo;ingress et Klipper pour le loadbalancing.</li><li><strong>Openshift</strong> : Une version de Kubernetes configurée et optimisée par Red Hat pour être utilisée dans son écosystème. Tout est intégré donc plus guidé, avec l&rsquo;inconvénient d&rsquo;être un peu captif·ve de l&rsquo;écosystème et des services vendus par Red Hat.</li></ul><footer class=footline></footer></article></div></main></div><aside id=sidebar class="default-animation showVisitedLinks"><div id=header-wrapper class=default-animation><div id=header class=default-animation><a id=logo href=https://zaggash.github.io/tp-iut-kubernetes/><img src=https://upload.wikimedia.org/wikipedia/commons/thumb/3/39/Kubernetes_logo_without_workmark.svg/247px-Kubernetes_logo_without_workmark.svg.png alt="k8s logo"></a></div><div class="searchbox default-animation"><i class="fas fa-search" title="Rechercher (CTRL+ALT+f)"></i>
<label class=a11y-only for=search-by>Rechercher</label>
<input data-search-input id=search-by name=search-by class=search-by type=search placeholder=Rechercher...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script>var contentLangs=["fr"]</script><script src=../js/auto-complete.js defer></script>
<script src=../js/lunr/lunr.min.js defer></script>
<script src=../js/lunr/lunr.stemmer.support.min.js defer></script>
<script src=../js/lunr/lunr.multi.min.js defer></script>
<script src=../js/lunr/lunr.fr.min.js defer></script>
<script src=../js/search.js defer></script></div><div id=homelinks class=default-animation><ul><li><a class=padding href=../><i class="fas fa-home"></i> Home</a></li></ul></div><div id=content-wrapper class=highlightable><ul class="topics enlarge morespace"><li data-nav-id=/cours1_presentation_kubernetes/ class=active><a class=padding href=../cours1_presentation_kubernetes/><b>1. </b>Presentation de Kubernetes<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/cours2_installation_kubernetes/><a class=padding href=../cours2_installation_kubernetes/><b>2. </b>Installer Kubernetes<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/td1-installation/><a class=padding href=../td1-installation/><b>3. </b>TD - Installation et Configuration<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/cours3_objets_kubernetes_partie1/><a class=padding href=../cours3_objets_kubernetes_partie1/><b>4. </b>Les objets Kubernetes - Partie 1<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/td2-deployer-wordpress/><a class=padding href=../td2-deployer-wordpress/><b>5. </b>TD - Deployer Wordpress<i class="fas fa-check read-icon"></i></a></li></ul><div id=shortcuts><div class="nav-title padding">Aller plus loin</div><ul class=space><li><a class=padding href=https://kubernetes.io/fr/docs/home/><i class="fab fa-book"></i> Documentation Kubernetes</a></li><li><a class=padding href=https://github.com/zaggash/tp-iut-kubernetes><i class="fab fa-github"></i> Dépôt du TP</a></li><li><a class=padding href=https://www.linkedin.com/in/alexandre-pinon/><i class="fab fa-linkedin"></i> Profil Linkedin</a></li></ul></div><div class="padding footermargin footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showVisitedLinks showFooter"></div><hr class="padding default-animation footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showVisitedLinks showFooter"><div id=prefooter class="footerLangSwitch footerVariantSwitch footerVisitedLinks showVisitedLinks"><ul><li id=select-language-container class=footerLangSwitch><div class="padding select-container"><i class="fas fa-language fa-fw"></i>
<span>&nbsp;</span><div class=select-style><label class=a11y-only for=select-language>Langue</label>
<select id=select-language onchange="location=baseUri+this.value"></select></div><div class=select-clear></div></div></li><li id=select-variant-container class=footerVariantSwitch><div class="padding select-container"><i class="fas fa-paint-brush fa-fw"></i>
<span>&nbsp;</span><div class=select-style><label class=a11y-only for=select-variant>Thème</label>
<select id=select-variant onchange=window.variants&&variants.changeVariant(this.value)><option id=blue value=blue selected>Blue</option></select></div><div class=select-clear></div></div><script>window.variants&&variants.markSelectedVariant()</script></li><li class="footerVisitedLinks showVisitedLinks"><button class=padding onclick=clearHistory()><i class="fas fa-history fa-fw"></i><span>&nbsp;</span>Supprimer l'historique</button></li></ul></div><div id=footer class="footerFooter showFooter"><center><p>Créé pour l'IUT Reims-Chalons-Charleville - Alexandre P.</p></center></div></div></aside><script src=../js/clipboard.min.js defer></script>
<script src=../js/perfect-scrollbar.min.js defer></script>
<script>function useMathJax(e){if(!Object.assign)return;window.MathJax=Object.assign(window.MathJax||{},{loader:{load:["[tex]/mhchem"]},startup:{elements:[".math"]},tex:{inlineMath:[["$","$"],["\\(","\\)"]]},options:{enableMenu:!1}},e)}useMathJax(JSON.parse("{}"))</script><script id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script>
<script src=../js/d3/d3-color.min.js defer></script>
<script src=../js/d3/d3-dispatch.min.js defer></script>
<script src=../js/d3/d3-drag.min.js defer></script>
<script src=../js/d3/d3-ease.min.js defer></script>
<script src=../js/d3/d3-interpolate.min.js defer></script>
<script src=../js/d3/d3-selection.min.js defer></script>
<script src=../js/d3/d3-timer.min.js defer></script>
<script src=../js/d3/d3-transition.min.js defer></script>
<script src=../js/d3/d3-zoom.min.js defer></script>
<script src=https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js defer></script>
<script>window.themeUseMermaid=JSON.parse('{ "theme": "default" }')</script><script src=https://cdn.jsdelivr.net/npm/rapidoc/dist/rapidoc-min.js defer></script>
<script>window.themeUseSwagger=JSON.parse('{ "theme": "light" }')</script><script src=../js/theme.js defer></script></body></html>